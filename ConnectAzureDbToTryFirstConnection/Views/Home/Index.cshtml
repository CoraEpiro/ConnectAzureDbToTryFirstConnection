@using ConnectAzureDbToTryFirstConnection.Models;

@model IEnumerable<Product>
@{
    ViewData["Title"] = "Home Page";
    IEnumerable<string> categories = ViewBag.Categories;
}

<div class="text-center">
    <h1 class="display-4">Select the product category</h1>

    <form method="post">
        <select name="optionValue" onchange="this.form.submit()">
            <option>Select a category</option>
            @foreach (var category in categories)
            {
                <option value="@category">@category</option>
            }
        </select>
    </form>

    @if(Model is not null)
    {
        <div>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Product Number</th>
                        <th>Color</th>
                        <th>List Price</th>
                        <th>Weight</th>
                        <th>Category Name</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var product in Model)
                    {
                        <tr>
                            <td>@product.Name</td>
                            <td>@product.ProductNumber</td>
                            <td>@product.Color</td>
                            <td>@product.ListPrice</td>
                            <td>@(product.Weight.HasValue ? product.Weight.ToString() : string.Empty)</td>
                            <td>@(product.ProductCategoryName != null ? product.ProductCategoryName : string.Empty)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>
